<!doctype html>
<html lang="en">
	<head>
		    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="Smiling School Homepage">
    <!-- Fonts -->
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Coiny&display=swap" rel="stylesheet">
    <!-- Styles -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="holberton_school-icon/styles.css">
	</head>
	<body>
		<div>
			<ul>
			</ul>
		</div>
	<script>

// Do some stuff when page hmtl page is launched
$(document).ready(function () {

    $("#headerTitle").hide(300).show(1500);
    // calling show food menu function
    showFoodMenu();
    
    // If you want to fetch data from the file 
    // call fetch data function instead of showFoodMenu
    // fetchData()
});

// ***************************************************************************************
// this function calls showfoodmenu 3000 milisecond to get new changes                   *
// made on demo.xml                                                                      *
// ***************************************************************************************
function fetchData() {
    setTimeout(function () {
        showFoodMenu();
        // recursive call
        fetchData();
    }, 3000);
}

// **************************************************************************************
// read data from demo.xml using Jquery | AJAX                                          *
// **************************************************************************************
function showFoodMenu() {

    $.ajax({
        type: "GET",
        url: "https://smileschool-api.hbtn.info/xml/quotes",
        dataType: "xml",

        error: function (e) {
            alert("An error occurred while processing XML file");
            console.log("XML reading Failed: ", e);
        },

        success: function (response) {

            // make sure the ul is empty
            // before appending data inot it
            $("ul").children().remove();

            $(response).find("quotes").each(function () {
		    console.log("1");
                var _name = 'Name: ' + $(this).find('name').text();
                console.log(_name);
                
                var _title = 'Title: ' + $(this).find('title').text();
                var _text = 'Text: ' + $(this).find('text').text();

                // add content to the HTML          
                $("ul").append('<li>' + _name + '</li>');
                $("ul").append('<li>' + _title + '</li>');
                $("ul").append('<li>' + _text + '</li>');
            });
        }
    });
}
	</script>
	</body>
</html>
